<style>
  .testimonials-section {
    position: relative;
    padding: 80px 48px;
  }
  .image__container img {
    position: absolute;
    inset: 0;
    transform: translateY(-90%);
    margin-inline: auto;
  }
  .testimonials-header {
    text-align: center;
    max-width: 700px;
    margin: 0 auto 40px;
  }
  .testimonials-header h2 {
    font-size: 36px;
    margin-bottom: 10px;
    font-weight: 700;
    margin-top: 0;
  }
  .testimonials-header p {
    color: #666;
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 48px;
  }
  .testimonials-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 30px;
  }
  .testimonial-card {
    background: #fff;
    border: 1px solid #e5e5e5;
    border-radius: 18px;
    padding: 32px;
    display: flex;
    flex-direction: column;
  }
  .stars {
    margin-bottom: 15px;
  }
  .testimonial-content {
    color: #333;
    line-height: 1.6;
    margin-bottom: 25px;
  }
  .testimonial-content p {
    margin-top: 0;
    font-size: 15px;
  }
  .testimonial-footer {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: auto;
  }
  .testimonial-footer img {
    object-fit: contain;
    width: 60px;
    height: 60px;
    padding: 3px;
  }
  .testimonial-footer strong {
    display: block;
    font-size: 15px;
    color: rgb(17, 24, 39);
  }
  .testimonial-footer span {
    font-size: 14px;
    color: rgb(107, 114, 128);
  }
  .testimonials-link {
    text-align: center;
    margin-top: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    column-gap: 10px;
  }
  .testimonials-link a {
    font-weight: 700;
    color: rgb(0, 0, 0);
    font-size: 16px;
    text-underline-offset: 5px;
  }
  .brand__container {
    border: 1px solid #e2e2e2;
    border-radius: 50%;
    padding: 16px;
    width: 64px;
    height: 64px;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  @media (max-width: 900px) {
    .testimonials-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<section class="testimonials-section">
  <div class="image__container">
    {{ section.settings.image | image_url: width: 200 | image_tag }}
  </div>
  <div class="page-width">

    <div class="testimonials-header">
      <h2>{{ section.settings.heading }}</h2>
      <p>{{ section.settings.subheading }}</p>
    </div>

    <div class="testimonials-grid">
      {% for block in section.blocks %}
        <div class="testimonial-card">

          <div class="stars">
            {% for i in (1..block.settings.rating) %}
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="#f59e6f"
                stroke="#f59e6f"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-star-icon lucide-star"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z" /></svg>
            {% endfor %}
          </div>

          <div class="testimonial-content">
            {{ block.settings.content }}
          </div>

          <div class="testimonial-footer">
            {% if block.settings.avatar %}
              <div class="brand__container">
                {{ block.settings.avatar | image_url: width: 1000, height: 1000| image_tag }}
              </div>
            {% endif %}
            <div>
              <strong>{{ block.settings.name }}</strong>
              <span>{{ block.settings.location }}</span>
            </div>
          </div>

        </div>
      {% endfor %}
    </div>

    {% if section.settings.bottom_link_text != blank %}
      <div class="testimonials-link">
        <a href="{{ section.settings.bottom_link_url }}">
          {{ section.settings.bottom_link_text }}
        </a>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-arrow-right-icon lucide-arrow-right"><path d="M5 12h14" /><path d="m12 5 7 7-7 7" /></svg>
      </div>
    {% endif %}

  </div>
</section>


{% schema %}
  {
    "name": "Customer Testimonials",
    "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "❤️ Our Loved Ones ❤️"
      },
      {
        "type": "textarea",
        "id": "subheading",
        "label": "Subheading",
        "default": "Here are some heartwarming testimonials straight from our delighted customers :P"
      },
      {
        "type": "text",
        "id": "bottom_link_text",
        "label": "Bottom Link Text",
        "default": "See customer reviews"
      }, {
        "type": "url",
        "id": "bottom_link_url",
        "label": "Bottom Link URL"
      }
    ],
    "blocks": [
      {
        "type": "testimonial",
        "name": "Testimonial",
        "settings": [
          {
            "type": "range",
            "id": "rating",
            "label": "Star Rating",
            "min": 1,
            "max": 5,
            "step": 1,
            "default": 5
          },
          {
            "type": "richtext",
            "id": "content",
            "label": "Testimonial Text"
          },
          {
            "type": "image_picker",
            "id": "avatar",
            "label": "Customer Logo / Avatar"
          },
          {
            "type": "text",
            "id": "name",
            "label": "Customer Name"
          }, {
            "type": "text",
            "id": "location",
            "label": "Customer Location"
          }
        ]
      }
    ],
    "max_blocks": 3,
    "presets": [
      {
        "name": "Customer Testimonials"
      }
    ]
  }
{% endschema %}